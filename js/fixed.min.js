function detectIE(){var e=navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);var n=e.indexOf("Trident/");if(n>0){var s=e.indexOf("rv:");return parseInt(e.substring(s+3,e.indexOf(".",s)),10)}var i=e.indexOf("Edge/");return i>0?parseInt(e.substring(i+5,e.indexOf(".",i)),10):!1}var isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,isAndroid=/android/i.test(navigator.userAgent)&&!window.MSStream,isOpera=/opera/i.test(navigator.userAgent),ieVersion=detectIE(),isIE=0!=ieVersion;if(isIOS||isAndroid&&!isOpera||isIE&&11>ieVersion){for(var getFBKEls=function(){return isIE&&8>=ieVersion?(ieVersion>7||!function(e,t){e=document,t=e.createStyleSheet(),e.querySelectorAll=function(n,s,i,l,r){for(r=e.all,s=[],n=n.replace(/\[for\b/gi,"[htmlFor").split(","),i=n.length;i--;){for(t.addRule(n[i],"k:v"),l=r.length;l--;)r[l].currentStyle.k&&s.push(r[l]);t.removeRule(0)}return s}}(),document.querySelectorAll(".fbk")):document.getElementsByClassName("fbk")},els=getFBKEls(),i=els.length-1;i>=0;i--){var el=els[i],fbkClass=el.getAttribute("data-fbk"),newEl=document.createElement("div");isIOS||(newEl.className="fbk "+fbkClass),newEl.style.position="absolute",isIE&&9>ieVersion?(newEl.style.width="100%",newEl.style.height="100%"):(newEl.style.width="100vw",newEl.style.height="100vh");var regex=RegExp("(fbk|"+fbkClass+")s*","g");if(el.className=el.className.replace(regex,""),el.appendChild(newEl),isIOS){var parent=newEl;newEl=document.createElement("div"),newEl.className="fbk "+fbkClass,newEl.style.position="fixed",newEl.style.width="100%",newEl.style.height="100%",parent.appendChild(newEl)}newEl.style.top="0px",newEl.style.left="0px",newEl.style.willChange="transform",newEl.style.backgroundAttachment="scroll",newEl.style.pointerEvents="none"}if(!isIOS){var updateFBKPos=function(){for(var e=isIE&&8>=ieVersion?document.documentElement.scrollTop:window.pageYOffset,t=0;t<els.length;t++){var n=els[t],s=n.getAttribute("data-offset");0==ieVersion||ieVersion>9?n.style.transform="translate3d(0px, "+(e-s)+"px, 0px)":9==ieVersion?n.style.msTransform="translate(0px,"+(e-s)+"px)":(n.style.marginTop=e-s+"px",n.style.width="100%",n.style.height=document.documentElement.clientHeight+"px")}};els=getFBKEls();for(var i=0;i<els.length;i++){var el=els[i],r=el.parentNode.getBoundingClientRect();el.setAttribute("data-offset",parseInt(r.top))}isAndroid&&window.addEventListener("touchstart touchmove mousewheel",updateFBKPos),0==ieVersion||ieVersion>8?window.addEventListener("scroll",updateFBKPos):window.onscroll=updateFBKPos,updateFBKPos()}}
